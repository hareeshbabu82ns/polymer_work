<link rel="import"
      href="/bower_components/polymer/polymer.html">

<dom-module id="x-todo">
  <link rel="import" type="css" href="x-todo.css">
  <template>
    <parse-element id="todos" class_name="Todos" items="{{todos}}"></parse-element>
    <template is="dom-repeat" items="{{todos}}">
      <todo-item item="{{item}}"
                 on-todo-destroy-item="_destroyTodo"
                 on-todo-update-item="_updateTodo"></todo-item>
    </template>
  </template>
  <script>
    Polymer({
      is: "x-todo",
      properties: {
        todo: {
          type: Object,
          value: {title: "todo title", finished: true}
        },
        todos: {
          type: Array,
          value: function () {
            return [];
          }
        }
      },
      _updateTodo: function (event) {
        console.log(event.detail);
        this.$.todos.updateObject(event.detail);
      },
      _destroyTodo: function (event) {
        console.log(event.detail);
        this.$.todos.deleteObject(event.detail);
      }
    });
  </script>
</dom-module>